从 IP 层面来讲，如果网络状况的确那么差，是没有任何可靠性保证的，而作为 IP 的上一层 TCP 也无能为力，唯一能做的就是更加努力，不断重传，通过各种算法保证。也就是说，**对于 TCP 来讲，IP 层你丢不丢包，我管不着，但是我在我的层面上，会努力保证可靠性。**

这有点像如果你在北京，和客户约十点见面，那么你应该清楚堵车是常态，你干预不了，也控制不了，你唯一能做的就是早走。打车不行就改乘地铁，尽力不失约。

接下来有一些**状态位**。例如 SYN 是发起一个连接，ACK 是回复，RST 是重新连接，FIN 是结束连接等。**TCP 是面向连接的，因而双方要维护连接的状态，这些带状态位的包的发送，会引起双方的状态变更。**

还有一个重要的就是窗口大小。**TCP 要做流量控制，通信双方各声明一个窗口，标识自己当前能够的处理能力**，别发送的太快，撑死我，也别发的太慢，饿死我。

通过对 TCP 头的解析，我们知道要掌握 TCP 协议，重点应该关注以下几个问题:

- 顺序问题 ，稳重不乱；
- 丢包问题，承诺靠谱；
- 连接维护，有始有终；
- 流量控制，把握分寸；
- 拥塞控制，知进知退。

### TCP 的三次握手

TCP 的连接建立，我们常常称为三次握手。

A：您好，我是 A。

B：您好 A，我是 B。

A：您好 B。











